# Partitioning
- Partitioning in Hive is a technique used to improve the performance of queries on large datasets by dividing them into smaller, more manageable parts. 
- The column used as partition should have minimum unique values/low crdinality to avoid over partitioning.
- Hive supports several types of partitioning, which are:

## Static Partitioning
- Here value of partition column(s) will be known to us.
- We load the data in specific partitions.
- Static partitioning takes less time while loading the data.

# Example
## Create table
- In this example, we created a table called sales and partitioned it by region column. 
- Note that we have not included 'region' column in create table. It is be defined under ```PARTITIONED BY``` statement.
```
CREATE TABLE sales
(
  sales_date STRING,
  product STRING,
  sales INT
)
PARTITIONED BY (region STRING);
```

## Insert Data
- While inserting the data we assign value to 'region' column using ```PARTITION``` statement
```
INSERT INTO TABLE sales PARTITION (region='East')
VALUES ('2022-01-01', 'Product A', 100),
       ('2022-01-08', 'Product B', 200);
```
```
INSERT INTO TABLE sales PARTITION (region='West')
VALUES ('2022-01-05', 'Product A', 150),
       ('2022-01-01', 'Product B', 250);
```

## Dynamic Partitioning
- Here column values will be unknown.
- Hive will identify the unique values from partition column(s).
- It takes longer time for loading the data.

# Example
## Set Dynamic partition mode
- The statement "SET hive.exec.dynamic.partition.mode=nonstrict;" is used in Apache Hive to set the dynamic partition mode to non-strict.
- In this mode, Hive allows dynamic partitioning on non-partition columns as well as partition columns. 
- This means that if a column is not specified in the "PARTITIONED BY" clause of the table, it can still be used as a dynamic partition column.
```
SET hive.exec.dynamic.partition.mode=nonstrict;
```

## Create table
```
CREATE TABLE my_table
(
  column1 INT,
  column2 STRING
)
PARTITIONED BY (partition_column STRING);
```

## Insert Data
```
INSERT INTO my_table (column1, column2, partition_column)
VALUES (1, 'foo', 'partition1'), (2, 'bar', 'partition2')
PARTITION (partition_column);
```

## Insert Data using other table
```
INSERT OVERWRITE TABLE my_table PARTITION (partition_column)
SELECT column1, column2, partition_column FROM my_other_table
```
- In this example, the partition column is automatically determined based on the data in "my_other_table".
